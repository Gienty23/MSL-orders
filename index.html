<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>MSL é¢„è®¢å•</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --primary: #f97316;
      --primary-dark: #ea580c;
      --accent-red: #ef4444;
      --bg: #0f172a;
      --card-bg: #020617;
      --text-main: #f9fafb;
      --text-sub: #9ca3af;
      --border-sub: #1f2937;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
      margin: 0;
      padding: 16px;
      background: radial-gradient(circle at top, #1f2933 0, #020617 60%);
      color: var(--text-main);
    }

    .page-wrap {
      max-width: 980px;
      margin: 0 auto;
    }

    .container {
      background: linear-gradient(135deg, rgba(15,23,42,0.96), rgba(15,23,42,0.98));
      border-radius: 24px;
      padding: 18px 18px 26px;
      box-shadow: 0 25px 60px rgba(0,0,0,0.55);
      border: 1px solid rgba(148,163,184,0.2);
    }

    .header {
      display: flex;
      gap: 14px;
      margin-bottom: 18px;
      align-items: center;
    }

    .logo-wrap {
      width: 64px;
      height: 64px;
      border-radius: 20px;
      background: radial-gradient(circle at 30% 10%, #fed7aa, #f97316 28%, #7f1d1d 80%);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(248,113,113,0.5);
      flex-shrink: 0;
    }
    .logo-inner {
      width: 80%;
      height: 80%;
      border-radius: 18px;
      border: 1px solid rgba(254,249,195,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: 700;
      color: #fefce8;
      text-shadow: 0 0 6px rgba(0,0,0,0.5);
    }

    h1 {
      margin: 0 0 4px;
      font-size: 24px;
      letter-spacing: 0.03em;
    }

    .sub-title {
      font-size: 13px;
      color: var(--text-sub);
    }

    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
    }
    .chip {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      color: #e5e7eb;
      background: rgba(15,23,42,0.8);
    }

    h2 {
      font-size: 17px;
      margin: 0 0 8px;
    }

    .section {
      margin-bottom: 22px;
      padding-bottom: 18px;
      border-bottom: 1px dashed rgba(55,65,81,0.7);
    }
    .section:last-child {
      border-bottom: none;
      padding-bottom: 0;
      margin-bottom: 0;
    }

    .step-tag {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      color: var(--text-sub);
      margin-bottom: 3px;
    }
    .step-circle {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: rgba(248,113,113,0.18);
      border: 1px solid rgba(248,113,113,0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: #fecaca;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      font-size: 13px;
    }

    input[type="date"],
    input[type="time"],
    input[type="text"],
    input[type="tel"],
    textarea,
    select {
      width: 100%;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid rgba(75,85,99,0.9);
      box-sizing: border-box;
      font-size: 14px;
      background: rgba(15,23,42,0.9);
      color: var(--text-main);
    }
    input::placeholder,
    textarea::placeholder {
      color: rgba(148,163,184,0.8);
    }
    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 1px rgba(249,115,22,0.4);
    }
    textarea {
      resize: vertical;
      min-height: 60px;
    }

    .two-col {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 12px;
    }

    .hint {
      font-size: 12px;
      color: var(--text-sub);
      margin-top: 4px;
    }

    .menu-group-title {
      font-size: 13px;
      font-weight: 600;
      margin: 10px 0 6px;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .menu-group-tag {
      font-size: 10px;
      padding: 1px 6px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      color: #f97316;
    }

    .menu-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      grid-gap: 12px;
    }

    .menu-item {
      border-radius: 16px;
      padding: 8px 8px 10px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      background: radial-gradient(circle at top left, rgba(248,250,252,0.02), rgba(15,23,42,0.96));
      border: 1px solid rgba(55,65,81,0.8);
      box-shadow: 0 6px 15px rgba(0,0,0,0.45);
    }

    .menu-img {
      width: 100%;
      height: 130px;
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 8px;
      background: radial-gradient(circle at 20% 0, #fed7aa, #7f1d1d 60%, #020617 100%);
      position: relative;
    }
    .menu-img img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .menu-img-placeholder {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: rgba(255,255,255,0.8);
      background: linear-gradient(135deg, rgba(15,23,42,0.1), rgba(15,23,42,0.7));
      backdrop-filter: blur(2px);
    }

    .menu-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 4px;
      gap: 8px;
    }
    .menu-name {
      font-weight: 600;
      font-size: 14px;
      line-height: 1.3;
    }
    .menu-price {
      color: #fecaca;
      font-weight: 700;
      font-size: 14px;
      white-space: nowrap;
    }

    .menu-tags {
      font-size: 11px;
      color: var(--text-sub);
      margin-bottom: 4px;
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }
    .tag-spicy {
      color: #f97316;
    }

    .menu-desc {
      font-size: 11px;
      color: var(--text-sub);
      margin-bottom: 4px;
    }

    .qty-row {
      display: flex;
      align-items: center;
      margin-top: 6px;
      font-size: 13px;
      justify-content: space-between;
      gap: 8px;
    }
    .qty-row input[type="number"] {
      width: 80px;
      padding: 4px 6px;
      border-radius: 8px;
      border: 1px solid rgba(75,85,99,0.9);
      background: rgba(15,23,42,0.9);
      color: var(--text-main);
    }

    .spicy-row {
      display: flex;
      align-items: center;
      margin-top: 6px;
      font-size: 13px;
      justify-content: space-between;
      gap: 8px;
    }
    .spicy-row select {
      flex: 1;
      padding: 4px 6px;
      border-radius: 8px;
      border: 1px solid rgba(75,85,99,0.9);
      background: rgba(15,23,42,0.9);
      color: var(--text-main);
      font-size: 13px;
    }

    .btn {
      display: inline-block;
      padding: 12px 22px;
      border: none;
      border-radius: 999px;
      font-size: 15px;
      cursor: pointer;
      background: linear-gradient(135deg, var(--primary), var(--accent-red));
      color: #fff;
      font-weight: 600;
      text-align: center;
      box-shadow: 0 10px 24px rgba(248,113,113,0.6);
      letter-spacing: 0.03em;
    }
    .btn:active {
      transform: translateY(1px);
      box-shadow: 0 6px 16px rgba(248,113,113,0.55);
    }
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      box-shadow: none;
    }

    .error {
      color: #fecaca;
      font-size: 13px;
      margin-top: 8px;
    }

    .result-box {
      background: radial-gradient(circle at top left, rgba(34,197,94,0.2), rgba(15,23,42,0.98));
      border-radius: 16px;
      padding: 14px 14px 10px;
      border: 1px solid rgba(34,197,94,0.5);
      margin-top: 14px;
      font-size: 14px;
    }
    .result-row {
      margin-bottom: 6px;
    }
    .highlight {
      font-weight: 700;
      color: #fef9c3;
    }
    .small {
      font-size: 13px;
      color: #e5e7eb;
    }

    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(250,204,21,0.1);
      color: #facc15;
      border: 1px solid rgba(250,204,21,0.6);
      margin-left: 6px;
    }

    .items-summary {
      font-size: 14px;
      margin-top: 8px;
    }
    .items-summary ul {
      margin: 4px 0 0;
      padding-left: 20px;
    }

    @media (max-width: 640px) {
      .container {
        padding: 16px 12px 22px;
      }
      h1 {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="page-wrap">
    <div class="container">
      <!-- é¡¶éƒ¨ LOGO + æ–‡æ¡ˆ -->
      <div class="header">
        <div class="logo-wrap">
          <div class="logo-inner">MSL</div>
        </div>
        <div>
          <h1>MSL é¢„è®¢å•</h1>
          <div class="sub-title">
            æå‰é¢„è®¢ Â· ç°åœºå–é¤ Â· EMT æ”¯ä»˜
          </div>
          <div class="chips">
            <span class="chip">ä¸‰æ ¼ä¾¿å½“ Â· é‡‘æ±¤æ±¤é”…</span>
            <span class="chip">ç‚’é¥­å¥—é¤ Â· å°é£Ÿ / æ±¤ç±»</span>
            <span class="chip">ä»¥æ”¶åˆ° EMT + å®¢æœç¡®è®¤ä¸ºå‡†</span>
          </div>
        </div>
      </div>

      <!-- 1. å–é¤ä¿¡æ¯ -->
      <div class="section">
        <div class="step-tag">
          <div class="step-circle">1</div> å¡«å†™å–é¤ä¿¡æ¯
        </div>
        <h2>å–é¤ä¿¡æ¯</h2>
        <div class="two-col">
          <div>
            <label for="orderDate">å–é¤æ—¥æœŸï¼ˆå¿…å¡«ï¼‰</label>
            <input type="date" id="orderDate">
            <div class="hint">è¯·é€‰æ‹©è®¡åˆ’å–é¤çš„æ—¥æœŸã€‚</div>
          </div>
          <div>
            <label for="pickupTime">å–é¤æ—¶é—´ï¼ˆå¯é€‰ï¼‰</label>
            <input type="time" id="pickupTime">
            <div class="hint">ä¾‹å¦‚ 18:30ï¼Œå¦‚æœ‰å˜åŠ¨ä»¥å®¢æœé€šçŸ¥ä¸ºå‡†ã€‚</div>
          </div>
        </div>
        <div class="two-col" style="margin-top: 12px;">
          <div>
            <label for="customerName">æ˜µç§°ï¼ˆå¿…å¡«ï¼‰</label>
            <input type="text" id="customerName" placeholder="ä¾‹å¦‚ï¼šå°ç‹ / å°çº¢">
          </div>
          <div>
            <label for="customerPhone">è”ç³»ç”µè¯ï¼ˆå¯é€‰ï¼Œæ–¹ä¾¿ç°åœºè”ç³»ï¼‰</label>
            <input type="tel" id="customerPhone" placeholder="ä¾‹å¦‚ï¼š647-000-0000">
          </div>
        </div>
        <div style="margin-top: 12px;">
          <label for="wechatId">å¾®ä¿¡å·ï¼ˆå¿…å¡«ï¼Œæ–¹ä¾¿ä¸å®¢æœæ²Ÿé€šï¼‰</label>
          <input type="text" id="wechatId" placeholder="è¯·è¾“å…¥å¸¸ç”¨å¾®ä¿¡å·">
        </div>
      </div>

      <!-- 2. èœå•é€‰æ‹© -->
      <div class="section">
        <div class="step-tag">
          <div class="step-circle">2</div> é€‰æ‹©èœå“ä¸è¾£åº¦
        </div>
        <h2>èœå“é€‰æ‹©</h2>
        <div class="hint">
          ä¸‰æ ¼ä¾¿å½“ / é‡‘æ±¤ç³»åˆ— / ç‚’é¥­å¥—é¤ / å°é£Ÿå‡å¯é€‰æ‹©è¾£åº¦ï¼ˆä¸è¾£ / æ­£å¸¸è¾£ / åŠ è¾£ï¼‰ï¼Œæ±¤ç±»æ— éœ€é€‰æ‹©è¾£åº¦ã€‚
        </div>

        <div class="menu-group-title">
          ğŸ± ä¸‰æ ¼ä¾¿å½“ç±»ï¼ˆä¸»èœ + ç•ªèŒ„ç‚’è›‹ + ç±³é¥­ï¼‰
          <span class="menu-group-tag">Combination Plates</span>
        </div>
        <div class="menu-list" id="menuListBento"></div>

        <div class="menu-group-title">
          ğŸ² é‡‘æ±¤ç³»åˆ—ï¼ˆæ±¤é”… + ç±³é¥­ï¼‰
          <span class="menu-group-tag">Golden Soup EntrÃ©es</span>
        </div>
        <div class="menu-list" id="menuListGolden"></div>

        <div class="menu-group-title">
          ğŸ› ç‚’é¥­å¥—é¤ï¼ˆç‚’é¥­ + æ±¤ï¼‰
          <span class="menu-group-tag">Fried Rice Combos</span>
        </div>
        <div class="menu-list" id="menuListFried"></div>

        <div class="menu-group-title">
          ğŸ¥— å°é£Ÿ / åŠ è´­
          <span class="menu-group-tag">Side Dish / Add-ons</span>
        </div>
        <div class="menu-list" id="menuListSide"></div>

        <div class="menu-group-title">
          ğŸ² æ±¤ç±»ï¼ˆå•ç‚¹ï¼‰
          <span class="menu-group-tag">Soup (A La Carte)</span>
        </div>
        <div class="menu-list" id="menuListSoup"></div>
      </div>

      <!-- 3. å¤‡æ³¨ -->
      <div class="section">
        <div class="step-tag">
          <div class="step-circle">3</div> å¡«å†™å¤‡æ³¨å¹¶æäº¤
        </div>
        <h2>å¤‡æ³¨ç‰¹æ®Šè¦æ±‚</h2>
        <label for="remark">å¤‡æ³¨</label>
        <textarea id="remark" placeholder="ä¾‹å¦‚ï¼šç±³é¥­å°‘ä¸€ç‚¹ / ä¸è¦èŠ±ç”Ÿ / åˆ†å¼€æ”¾è¾£æ¤’ / å„ä»½å†™ä¸Šæ˜µç§°ç­‰"></textarea>
      </div>

      <!-- 4. æäº¤ & ç»“æœ -->
      <div class="section">
        <button class="btn" id="submitBtn">æäº¤è®¢å•</button>
        <div class="error" id="errorMsg" style="display:none;"></div>

        <div id="result" style="display:none;" class="result-box">
          <div class="result-row">
            âœ… é¢„è®¢å•å·²æäº¤ï¼<span class="badge">è¯·åœ¨ 30 åˆ†é’Ÿå†…å®Œæˆ EMT</span>
          </div>
          <div class="result-row">
            è®¢å•å·ï¼š<span class="highlight" id="orderNo"></span>
          </div>
          <div class="result-row">
            å–é¤æ—¥æœŸï¼š<span class="highlight" id="orderDateShow"></span>
            <span id="pickupTimeShowWrapper" style="display:none;"> ï½œ å–é¤æ—¶é—´ï¼š<span class="highlight" id="pickupTimeShow"></span></span>
          </div>
          <div class="result-row">
            è®¢å•æ€»é‡‘é¢ï¼š<span class="highlight" id="totalAmount"></span>
          </div>
          <div class="result-row">
            <!-- TODOï¼šæ”¹æˆä½ çš„ EMT é‚®ç®± -->
            è¯· EMT è‡³ï¼š<span class="highlight" id="emtEmail">your-emt-email@example.com</span>
          </div>
          <div class="result-row small">
            ğŸ‘‰ EMT å¤‡æ³¨è¯·å¡«å†™è®¢å•å·ï¼š<span class="highlight" id="orderNoForEmt"></span>
          </div>
          <div class="result-row small">
            âš ï¸ è®¢å•ä»…åœ¨æœ¬åº—æ”¶åˆ° EMT ä»˜æ¬¾å¹¶é€šè¿‡å¾®ä¿¡ / ç”µè¯ä¸æ‚¨ç¡®è®¤åæ‰è§†ä¸ºæœ‰æ•ˆã€‚å¦‚ 30 åˆ†é’Ÿå†…æœªä»˜æ¬¾ï¼Œé¢„è®¢å•å°†è‡ªåŠ¨ä½œåºŸã€‚
          </div>
          <div class="items-summary">
            <div>æœ¬å•èœå“ï¼š</div>
            <ul id="itemsSummary"></ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ================================
    // èœå•æ•°æ®ï¼ˆæŒ‰ä½ ç»™çš„æœ€ç»ˆç‰ˆèœå•ï¼‰
    // spicy: true = å¯é€‰è¾£åº¦ï¼›false = ä¸é€‰è¾£åº¦ï¼ˆæ±¤ç±»ï¼‰
    // kcal / desc ç”¨äºå±•ç¤ºï¼Œä¸å½±å“ä»·æ ¼
    // imageUrl å°†æ¥å¯åŠ å›¾ç‰‡åœ°å€
    // ================================
    const menuItems = [
      // ğŸ± ä¸‰æ ¼ä¾¿å½“ç±»ï¼ˆä¸»èœ + ç•ªèŒ„ç‚’è›‹ + ç±³é¥­ï¼‰
      {
        id: 1,
        category: 'bento',
        name: 'å†œå®¶å°ç‚’è‚‰ + è¥¿çº¢æŸ¿é¸¡è›‹',
        price: 16.99,
        spicy: true,
        kcal: 833,
        desc: 'Pork, Green & Red Chili Peppers, Tomatoes & Eggs, Rice, etc.',
        imageUrl: ''
      },
      {
        id: 2,
        category: 'bento',
        name: 'å®«ä¿é¸¡ä¸ + è¥¿çº¢æŸ¿é¸¡è›‹',
        price: 16.99,
        spicy: true,
        kcal: 815,
        desc: 'Chicken, Peanuts, Red Chili Peppers, Tomatoes & Eggs, Rice, etc.',
        imageUrl: ''
      },
      {
        id: 3,
        category: 'bento',
        name: 'é±¼é¦™èŒ„å­ + è¥¿çº¢æŸ¿é¸¡è›‹',
        price: 15.99,
        spicy: true,
        kcal: 720,
        desc: 'Eggplant, Wood Ear Mushroom, Red Chili Peppers, Tomatoes & Eggs, Rice, etc.',
        imageUrl: ''
      },
      {
        id: 4,
        category: 'bento',
        name: 'å·æ¤’é¸¡ç¿… + è¥¿çº¢æŸ¿é¸¡è›‹',
        price: 18.99,
        spicy: true,
        kcal: 850,
        desc: 'Chicken Wings, Green & Red Chili Peppers, Tomatoes & Eggs, Rice, etc.',
        imageUrl: ''
      },
      {
        id: 5,
        category: 'bento',
        name: 'å°–æ¤’è‚¥è‚  + è¥¿çº¢æŸ¿é¸¡è›‹',
        price: 16.99,
        spicy: true,
        kcal: 820,
        desc: 'Pork Intestine, Green & Red Chili Peppers, Tomatoes & Eggs, Rice, etc.',
        imageUrl: ''
      },
      {
        id: 6,
        category: 'bento',
        name: 'é…¸è±†è§’ç‚’è‚‰æœ« + è¥¿çº¢æŸ¿é¸¡è›‹',
        price: 17.99,
        spicy: true,
        kcal: 738,
        desc: 'Minced Pork, Pickled Green Beans, Tomatoes & Eggs, Rice, etc.',
        imageUrl: ''
      },
      {
        id: 7,
        category: 'bento',
        name: 'æ´‹è‘±è‚¥ç‰› + è¥¿çº¢æŸ¿é¸¡è›‹',
        price: 18.99,
        spicy: true,
        kcal: 890,
        desc: 'Beef Slices, Onion, Mixed Vegetables, Tomatoes & Eggs, Rice, etc.',
        imageUrl: ''
      },
      {
        id: 8,
        category: 'bento',
        name: 'è‚‰é£Ÿä¸»ä¹‰ + è¥¿çº¢æŸ¿é¸¡è›‹',
        price: 18.99,
        spicy: true,
        kcal: 910,
        desc: 'Meat Balls, Pork Intestine, Spam, Beef Tripe, Tomatoes & Eggs, Rice, etc.',
        imageUrl: ''
      },
      {
        id: 9,
        category: 'bento',
        name: 'é¦™è¾£å››å–œ + è¥¿çº¢æŸ¿é¸¡è›‹',
        price: 18.99,
        spicy: true,
        kcal: 810,
        desc: 'Shrimp, Pork Rib, Beef Sirloin, Lamb Cube, Tomatoes & Eggs, Rice, etc.',
        imageUrl: ''
      },
      {
        id: 10,
        category: 'bento',
        name: 'ç³–é†‹é±¼æŸ³ + è¥¿çº¢æŸ¿é¸¡è›‹',
        price: 16.99,
        spicy: true,
        kcal: 750,
        desc: 'Fried Fish Fillet, Sweet & Sour Sauce, Tomatoes & Eggs, Rice, etc.',
        imageUrl: ''
      },
      {
        id: 11,
        category: 'bento',
        name: 'éº»å©†è±†è… + è¥¿çº¢æŸ¿é¸¡è›‹',
        price: 15.99,
        spicy: true,
        kcal: 719,
        desc: 'Minced Pork, Tofu, Red Chili Peppers, Tomatoes & Eggs, Rice, etc.',
        imageUrl: ''
      },

      // ğŸ² é‡‘æ±¤ç³»åˆ—ï¼ˆæ±¤é”… + ç±³é¥­ï¼‰
      {
        id: 12,
        category: 'golden',
        name: 'é‡‘æ±¤é…¸èœé±¼ + ç±³é¥­',
        price: 18.49,
        spicy: true,
        kcal: 860,
        desc: 'Fish Fillet, Enoki Mushroom, Glass Noodles, Golden Pickled Cabbage Soup, Rice, etc.',
        imageUrl: ''
      },
      {
        id: 13,
        category: 'golden',
        name: 'é‡‘æ±¤é…¸èœè‚¥ç‰› + ç±³é¥­',
        price: 18.49,
        spicy: true,
        kcal: 870,
        desc: 'Beef Slices, Enoki Mushroom, Glass Noodles, Golden Pickled Cabbage Soup, Rice, etc.',
        imageUrl: ''
      },

      // ğŸ› ç‚’é¥­å¥—é¤ï¼ˆç‚’é¥­ + æ±¤ï¼‰
      {
        id: 14,
        category: 'fried',
        name: 'å’–å–±ç‰›è‚‰ç‚’é¥­ + å†¬ç“œè™¾ä»æ±¤',
        price: 16.0,
        spicy: true,
        kcal: 854,
        desc: 'Curry Beef Fried Rice + Winter Melon Shrimp Soup.',
        imageUrl: ''
      },
      {
        id: 15,
        category: 'fried',
        name: 'é‚£ä¸€å¹´è›‹ç‚’é¥­ + å†¬ç“œè™¾ä»æ±¤',
        price: 16.0,
        spicy: true,
        kcal: 754,
        desc: 'Classic Fried Rice + Winter Melon Shrimp Soup.',
        imageUrl: ''
      },

      // ğŸ¥— å°é£Ÿ / åŠ è´­
      {
        id: 16,
        category: 'side',
        name: 'å‡‰æ‹ŒåœŸè±†ä¸ + POP',
        price: 3.0,
        spicy: true,
        kcal: 430,
        desc: 'Shredded Potatoes, Chili Peppers, Green Onions, soft drink, etc.',
        imageUrl: ''
      },

      // ğŸ² æ±¤ç±»ï¼ˆå•ç‚¹ï¼‰
      {
        id: 17,
        category: 'soup',
        name: 'å†¬ç“œè™¾ä»æ±¤ï¼ˆ12ozï¼‰',
        price: 3.99,
        spicy: false,
        kcal: 94,
        desc: 'Winter Melon & Shrimp Soup.',
        imageUrl: ''
      }
    ];

    // TODOï¼šæ”¹æˆä½ çš„çœŸå® EMT é‚®ç®±
    const EMT_EMAIL = "your-emt-email@example.com";

    // é˜²æ­¢åŒä¸€é¡µé¢é‡å¤æäº¤
    let hasSubmitted = false;

    const menuListBentoEl = document.getElementById('menuListBento');
    const menuListGoldenEl = document.getElementById('menuListGolden');
    const menuListFriedEl = document.getElementById('menuListFried');
    const menuListSideEl = document.getElementById('menuListSide');
    const menuListSoupEl = document.getElementById('menuListSoup');

    function renderMenuForCategory(category, containerEl) {
      containerEl.innerHTML = '';
      menuItems
        .filter(item => item.category === category)
        .forEach(item => {
          const div = document.createElement('div');
          div.className = 'menu-item';

          const imgHtml = `
            <div class="menu-img">
              ${item.imageUrl
                ? `<img src="${item.imageUrl}" alt="${item.name}">`
                : `<div class="menu-img-placeholder">èœå“å›¾ç‰‡å ä½ï¼ˆå¯åæœŸæ›¿æ¢ä¸ºçœŸå®ç…§ç‰‡ï¼‰</div>`
              }
            </div>
          `;

          const spicyTags = item.spicy
            ? `<span class="tag-spicy">å¯é€‰è¾£åº¦</span><span>${item.kcal} Kcal</span>`
            : `<span>æ— è¾£åº¦</span><span>${item.kcal} Kcal</span>`;

          const spicyHtml = item.spicy ? `
            <div class="spicy-row">
              <span>è¾£åº¦ï¼š</span>
              <select data-spicy-id="${item.id}">
                <option value="ä¸è¾£">ä¸è¾£</option>
                <option value="æ­£å¸¸è¾£" selected>æ­£å¸¸è¾£</option>
                <option value="åŠ è¾£">åŠ è¾£</option>
              </select>
            </div>
          ` : '';

          div.innerHTML = `
            ${imgHtml}
            <div>
              <div class="menu-header">
                <div class="menu-name">${item.name}</div>
                <div class="menu-price">CAD $${item.price.toFixed(2)}</div>
              </div>
              <div class="menu-tags">
                ${spicyTags}
              </div>
              <div class="menu-desc">
                ${item.desc}
              </div>
              <div class="qty-row">
                <span>æ•°é‡ï¼ˆä»½ï¼‰ï¼š</span>
                <input type="number" min="0" max="20" value="0" data-id="${item.id}">
              </div>
              ${spicyHtml}
            </div>
          `;

          containerEl.appendChild(div);
        });
    }

    function renderAllMenus() {
      renderMenuForCategory('bento', menuListBentoEl);
      renderMenuForCategory('golden', menuListGoldenEl);
      renderMenuForCategory('fried', menuListFriedEl);
      renderMenuForCategory('side', menuListSideEl);
      renderMenuForCategory('soup', menuListSoupEl);
    }

    renderAllMenus();

    // é»˜è®¤æ—¥æœŸè®¾ä¸ºæ˜å¤©ï¼ˆæš‚æ—¶ä¿ç•™ï¼‰
    (function setDefaultDate() {
      const dateInput = document.getElementById('orderDate');
      const d = new Date();
      d.setDate(d.getDate() + 1);
      const yyyy = d.getFullYear();
      const mm = String(d.getMonth() + 1).padStart(2, '0');
      const dd = String(d.getDate()).padStart(2, '0');
      dateInput.value = `${yyyy}-${mm}-${dd}`;
    })();

    // ================================
    // æäº¤è®¢å•é€»è¾‘ï¼ˆå«é˜²é‡å¤æäº¤ï¼‰
    // ================================
    const submitBtn = document.getElementById('submitBtn');
    const errorMsg = document.getElementById('errorMsg');
    const resultBox = document.getElementById('result');
    const orderNoEl = document.getElementById('orderNo');
    const orderNoForEmtEl = document.getElementById('orderNoForEmt');
    const totalAmountEl = document.getElementById('totalAmount');
    const itemsSummaryEl = document.getElementById('itemsSummary');
    const orderDateShowEl = document.getElementById('orderDateShow');
    const pickupTimeShowWrapper = document.getElementById('pickupTimeShowWrapper');
    const pickupTimeShowEl = document.getElementById('pickupTimeShow');
    const emtEmailEl = document.getElementById('emtEmail');

    emtEmailEl.textContent = EMT_EMAIL;

    submitBtn.addEventListener('click', function () {
      errorMsg.style.display = 'none';
      resultBox.style.display = 'none';

      // é˜²æ­¢åŒä¸€é¡µé¢å¤šæ¬¡æäº¤
      if (hasSubmitted) {
        showError('æœ¬é¡µé¢å·²æˆåŠŸæäº¤ä¸€ä»½é¢„è®¢å•ï¼Œå¦‚éœ€å†æ¬¡ä¸‹å•è¯·åˆ·æ–°é¡µé¢æˆ–é‡æ–°æ‰“å¼€é“¾æ¥ã€‚');
        return;
      }

      const orderDate = document.getElementById('orderDate').value;
      const pickupTime = document.getElementById('pickupTime').value;
      const nickName = document.getElementById('customerName').value.trim();
      const phone = document.getElementById('customerPhone').value.trim();
      const wechatId = document.getElementById('wechatId').value.trim();

      if (!orderDate) {
        return showError('è¯·é€‰æ‹©å–é¤æ—¥æœŸ');
      }

      const todayStr = new Date().toISOString().slice(0,10);
      if (orderDate < todayStr) {
        return showError('å–é¤æ—¥æœŸä¸èƒ½æ—©äºä»Šå¤©');
      }

      if (!nickName) {
        return showError('è¯·å¡«å†™æ˜µç§°');
      }

      if (!wechatId) {
        return showError('è¯·å¡«å†™å¾®ä¿¡å·ï¼Œæ–¹ä¾¿ä¸å®¢æœæ²Ÿé€š');
      }

      // è¯»å–æ‰€æœ‰æ•°é‡
      const qtyInputs = document.querySelectorAll('input[type="number"][data-id]');
      let hasItem = false;
      let total = 0;
      const orderedItems = [];

      qtyInputs.forEach(input => {
        const qty = parseInt(input.value || '0', 10);
        if (qty > 0) {
          const id = parseInt(input.getAttribute('data-id'), 10);
          const item = menuItems.find(m => m.id === id);
          if (item) {
            hasItem = true;
            const itemTotal = item.price * qty;

            let spicyLevel = '';
            if (item.spicy) {
              const spicySelect = document.querySelector(`select[data-spicy-id="${item.id}"]`);
              spicyLevel = spicySelect ? spicySelect.value : '';
            }

            total += itemTotal;
            orderedItems.push({
              ...item,
              quantity: qty,
              itemTotal,
              spicyLevel
            });
          }
        }
      });

      if (!hasItem) {
        return showError('è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªèœå“çš„æ•°é‡');
      }

      // ç”Ÿæˆè®¢å•å·ï¼ˆæœ¬åœ°ï¼šæ—¥æœŸ + å½“æ—¥åºå·ï¼‰
      const dateStr = orderDate.replace(/-/g, '');
      const key = 'orderCount_' + dateStr;
      const prevCount = parseInt(localStorage.getItem(key) || '0', 10);
      const seq = prevCount + 1;
      localStorage.setItem(key, seq.toString());
      const seqStr = String(seq).padStart(2, '0');
      const orderNo = `${dateStr}-${seqStr}`;

      // å±•ç¤ºç»“æœ
      orderNoEl.textContent = orderNo;
      orderNoForEmtEl.textContent = orderNo;
      totalAmountEl.textContent = 'CAD $' + total.toFixed(2);
      orderDateShowEl.textContent = orderDate;
      if (pickupTime) {
        pickupTimeShowWrapper.style.display = 'inline';
        pickupTimeShowEl.textContent = pickupTime;
      } else {
        pickupTimeShowWrapper.style.display = 'none';
      }

      itemsSummaryEl.innerHTML = '';
      orderedItems.forEach(item => {
        const spicyText = item.spicy ? `ï¼ˆ${item.spicyLevel}ï¼‰` : '';
        const li = document.createElement('li');
        li.textContent = `${item.name}${spicyText} Ã— ${item.quantity} = CAD $${item.itemTotal.toFixed(2)}`;
        itemsSummaryEl.appendChild(li);
      });

      resultBox.style.display = 'block';

      // é”ä½æŒ‰é’®ï¼Œé˜²æ­¢é‡å¤æäº¤
      hasSubmitted = true;
      submitBtn.disabled = true;
      submitBtn.textContent = 'å·²æäº¤ï¼ˆå¦‚éœ€å†æ¬¡ä¸‹å•è¯·åˆ·æ–°é¡µé¢ï¼‰';

      // å°†æ¥å¦‚æœæ¥ Google Sheet / åç«¯ï¼Œè¿™é‡Œå¯ä»¥å‘ payload
      // const payload = { orderNo, orderDate, pickupTime, nickName, phone, wechatId, total, items: orderedItems };
    });

    function showError(msg) {
      errorMsg.textContent = msg;
      errorMsg.style.display = 'block';
    }
  </script>
</body>
</html>


